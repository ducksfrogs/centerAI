<!doctypehtml><html lang=ja><meta charset=UTF-8><script src=//cdn.jsdelivr.net/npm/phaser@3.21.0/dist/phaser.js></script><style>body{margin:0}</style><script>var mainScene=new Phaser.Scene("mainScene");mainScene.preload=function(){this.load.image("map01","../assets/images/map01.png"),this.load.image("treasure01","../assets/images/treasure01.png"),this.load.image("enemy01","../assets/images/enemy01.png"),this.load.spritesheet("player","../assets/images/player1.png",{frameWidth:32,frameHeight:32})},mainScene.create=function(){var e=this.add.group({key:"map01",frameQuantity:192});Phaser.Actions.GridAlign(e.getChildren(),{width:16,height:12,cellWidth:50,cellHeight:50,x:25,y:25}),this.player=this.add.sprite(400,300,"player"),this.player.setScale(1.5),this.player.setFrame(0),this.anims.create({key:"turn",frames:[{key:"player",frame:0}],frameRate:20}),this.anims.create({key:"left",frames:this.anims.generateFrameNumbers("player",{start:3,end:5}),frameRate:10,repeat:-1}),this.anims.create({key:"right",frames:this.anims.generateFrameNumbers("player",{start:6,end:8}),frameRate:10,repeat:-1}),this.anims.create({key:"up",frames:this.anims.generateFrameNumbers("player",{start:9,end:11}),frameRate:10,repeat:-1}),this.anims.create({key:"down",frames:this.anims.generateFrameNumbers("player",{start:0,end:2}),frameRate:10,repeat:-1}),this.score=0,this.scoreText=this.add.text(700,50,this.score,{font:"40px Open Sans",fill:"#0000ff"}),this.player.setDepth(1),this.createTreasure(),this.enemies=this.add.group({key:"enemy01",repeat:5}),this.hp=50,this.hpText=this.add.text(30,20,this.hp,{font:"40px Open Sans",fill:"#ff0000"});var t=this.enemies.getChildren();for(var s in t){var a=t[s];a.setSize(50,50),a.setDisplaySize(50,50),a.setOrigin(0,0),a.setRandomPosition(0,0,800-a.width,600-a.height),a.isHit=!1}},mainScene.update=function(){var e=this.input.keyboard.createCursorKeys();e.right.isDown?(this.player.x+=5,this.player.anims.play("right",!0)):e.left.isDown?(this.player.x-=5,this.player.anims.play("left",!0)):e.up.isDown?(this.player.y-=5,this.player.anims.play("up",!0)):e.down.isDown?(this.player.y+=5,this.player.anims.play("down",!0)):this.player.anims.stop();var t=this.player.getCenter(),s=this.treasure01.getCenter();if(t.distance(s)<=40)return this.score+=5,this.scoreText.text=this.score,this.treasure01.destroy(),void this.createTreasure();var a=this.player.getBounds(),i=this.enemies.getChildren();for(var r in i){var n=i[r],h=n.getBounds();Phaser.Geom.Intersects.RectangleToRectangle(a,h)?n.isHit||(this.hp-=10,this.hpText.text=this.hp,n.isHit=!0,this.cameras.main.flash(1e3,255,255,0)):n.isHit=!1}},mainScene.createTreasure=function(){this.treasure01=this.add.image(0,0,"treasure01").setOrigin(0,0),this.treasure01.setRandomPosition(0,0,800-this.treasure01.width,600-this.treasure01.height),this.treasure01.setDepth(0)};var config={type:Phaser.AUTO,width:800,height:600,scene:[mainScene]},game=new Phaser.Game(config)</script>